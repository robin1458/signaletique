<!DOCTYPE html>
<html>
<head>
  <title>glb-viewer</title>
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <script src="https://rawgit.com/fernandojsg/aframe-teleport-controls/master/dist/aframe-teleport-controls.min.js"></script>
  <script type="module" src="./mc-controls.js"></script>

  <script type="module">
    onload = async () => {
      // Charger directement le modèle "testawa.glb"
      const url = "./testawa.glb"; // Chemin direct vers le fichier GLB
      console.log("Chargement du modèle :", url);

      // Créer un élément <a-asset-item> pour le modèle
      const asset = document.createElement("a-asset-item");
      asset.setAttribute("id", "base");
      asset.setAttribute("src", url);
      assets.appendChild(asset);

      // Ajouter l'entité du modèle à la scène
      const en = document.createElement("a-entity");
      en.setAttribute("gltf-model", "#base");
      scene.appendChild(en);
    };
  </script>
</head>

<body>
  <a-scene id="scene" background="color: #4080e0" renderer="colorManagement: true">
    <a-assets xtimeout="10000" id="assets">
    </a-assets>
    <a-entity light="type: ambient; color: #FFF"></a-entity>
    
    <a-entity id="cameraRig" position="0 0 0">
      <a-entity id="head" camera position="0 1.7 0" mc-controls look-controls></a-entity>
      <a-entity oculus-touch-controls="hand:left" teleport-controls="button:trigger; collisionEntities:.collidable; cameraRig:#cameraRig; teleportOrigin:#head;"></a-entity>
      <a-entity oculus-touch-controls="hand:right" teleport-controls="button:trigger; collisionEntities:.collidable; cameraRig:#cameraRig; teleportOrigin:#head;"></a-entity>
    </a-entity>
  </a-scene>
</body>
</html>
